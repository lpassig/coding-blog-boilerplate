(window.officehome_antpshared_webpackJsonp=window.officehome_antpshared_webpackJsonp||[]).push([[169],{hpRO:function(e,t,n){"use strict";n.r(t),n.d(t,"initSettings",(function(){return Te}));var o=n("bb6g"),i=n("GLhW"),a=n("MhVo"),s=n("9DSV"),r=n("geP7"),c=n("F56Y"),l=n("sY4M"),g=n("4B5z"),d=n("O1V3"),u=n("wJn8"),m=n("81oL"),h=n("9whc");let y,p;function f(e){window.requestAnimationFrame(()=>{const t=e&&e.length;for(let n=0;n<t;n++){const t=e[n].intersectionRatio;t>=.2?(y.style.visibility="visible",y.style.opacity=t*t+""):(y.style.opacity="0",y.style.visibility="hidden")}})}const b=function(){p&&(p.unobserve(y),p=null)};let I,S,k,T;function w(e){window.requestAnimationFrame(()=>{const t=e&&e.length;for(let n=0;n<t;n++){const t=e[n];if(t.intersectionRatio<=.9){const e=k-t.intersectionRect.height;e>40?(I.style.opacity="0",I.style.visibility="hidden",S=S||document.getElementById(h.a.museumCard),S&&(S.style.opacity="0",S.style.visibility="hidden")):(I.style.visibility="",I.style.opacity=(40-e)/40+"",S&&(S.style.visibility="",S.style.opacity=(40-e)/40+""))}else I.style.visibility="",I.style.opacity="1",S&&(S.style.visibility="",S.style.opacity="1")}})}const E=function(){T&&(T.unobserve(I),T=null)};let B,_,v;const L=()=>{O(B,_)};function O(e,t){B=e,_=t,v=!_,v?y&&(p||window.IntersectionObserver&&(p=new window.IntersectionObserver(f,{root:null,rootMargin:"-15% 0% 0%",threshold:[.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}),p.observe(y))):b(),B?I&&(k=I.clientHeight,T||window.IntersectionObserver&&(T=new window.IntersectionObserver(w,{root:null,rootMargin:"-148px 0px 0px",threshold:[.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}),T.observe(I))):E()}const x={initialize:function(){y=document.getElementById(h.a.companyLogo),I=document.getElementById(h.a.quickLinks),S=document.getElementById(h.a.museumCard),window.addEventListener("resize",()=>{window.requestAnimationFrame(L)})},updateObservers:O,removeListeners:function(){b(),E(),window.removeEventListener("resize",L)}};var C=n("IMdJ");const D=function(e,t,n,o,i){const a=function(e,t,n,o){const i={duration:n,delay:0,easing:h.b};return o||(i.fill="none"),new C.AnimateTo(e,{y:t},i)}(e,t,n,o);return a.onFinish=()=>{i&&"function"==typeof i&&i(),window.requestAnimationFrame(()=>{e.style.transform="translateY("+t+"px)",o&&a.cancel()})},a};var P=n("GA49");let M,A,F,q,H,z,G,N,R,j,Y,V,J,W=!0;const U=()=>{window.requestAnimationFrame(()=>{W=!1,Q(Y),W=!0})};function K(e,t,n,o){const i=new C.AnimateGroup(function(e,t,n,o){const i=[];return i.push(D(G,n,e,!1)),N&&i.push(D(N,t,e,!1)),z&&i.push(D(z,o,e,!1)),i}(e,t,n,o));W&&M.scrollTo(0,0),i.play()}function Q(e){switch(Y=e,j=document.documentElement.clientHeight,A=A||document.getElementById(h.a.backgroundImage),F=F||document.getElementById(h.a.backgroundImage2),q=q||document.getElementById(h.a.backgroundImageOverlay),X(A,h.a.backgroundImage),X(F,h.a.backgroundImage2),X(q,h.a.backgroundImageOverlay),e){case l.h.focused:!function(){R.style.height=j-P.a.PeekHeight+"px",Z(H),[A,F].forEach(e=>{e&&(e.style.height="0px",e.style.backgroundSize="")}),J="0px",$(z);const e=.5*(j-P.a.SearchBoxHeight);V=e;const t=e-P.a.SearchBoxOffsetTop,n=e+P.a.SearchBoxHeight+P.a.SearchBoxPaddingBottom-P.a.TopSitesOffsetFromTop,o=e-P.a.CompanyLogoHeight-P.a.SearchBoxPaddingTop;n+P.a.TopSitesOffsetFromTop+P.a.TopSitesHeight>j?Z(N):$(N),K(300,n,t,o)}();break;case l.h.informational:R.style.height="",$(H),[A,F].forEach(e=>{e&&(e.style.height="",e.style.backgroundSize="")}),q&&(q.style.height=""),J="",Z(z),V=P.a.SearchBoxOffsetTop,K(300,-1*P.a.TopSitesTranslateInspirational,0,0);break;case l.h.inspirational:!function(){const e=j-P.a.PeekHeight+"px";R.style.height=e,J=e,$(H),[A,F].forEach(t=>{t&&(t.style.height=e,t.style.backgroundSize="cover")}),q&&(q.style.height=e),Z(z);const t=window.document.documentElement.clientWidth,n=j*(.01*P.b.Inspirational);V=n+P.a.SearchBoxOffsetTop,K(300,j-(t>1085?P.a.TopSitesOffSet:P.a.TopSitesOffSet+100),n,0)}()}}function X(e,t){(e=e||document.getElementById(t))&&(e.style.position="")}function Z(e){e.style.visibility="hidden",e.style.opacity="0"}function $(e){e.style.visibility="visible",e.style.opacity="1"}const ee={initialize:function(){M=document.getElementById(h.a.antpScroll),A=document.getElementById(h.a.backgroundImage),F=document.getElementById(h.a.backgroundImage2),q=document.getElementById(h.a.backgroundImageOverlay),H=document.getElementById(h.a.bingImage),z=document.getElementById(h.a.companyLogo),N=document.getElementById(h.a.quickLinks),G=document.getElementById(h.a.search),R=document.getElementById(h.a.topSectionRoot),window.addEventListener("resize",U)},updateLayout:Q,reportSearchYPosition:function(){return V},reportBackgroundImageHeight:function(){return J}};var te=n("Ph0j");let ne,oe,ie,ae,se,re,ce,le,ge,de,ue=!1,me=!1,he=0,ye=!1,pe={searchDistanceToTop:32,backgroundImageDistanceToTop:108};function fe(){ye=!1,re=ce?ce():re,le=ge?ge():le,Se(),be()}function be(){window.requestAnimationFrame(()=>{const e=Math.max(document.documentElement.scrollTop,se.scrollTop),t=re-e;ae&&(!me&&t<=pe.searchDistanceToTop?(ue=!0,Se()):me&&t>pe.searchDistanceToTop&&(ue=!1,Se())),ne=ne||document.getElementById(h.a.backgroundImage);const n=[ne,oe,ie];if(ne){const t=ne.offsetHeight-pe.backgroundImageDistanceToTop;oe=oe||document.getElementById(h.a.backgroundImage2),ie=ie||document.getElementById(h.a.backgroundImageOverlay),!ye&&e>t?(n.forEach(e=>{e&&(e.style.position="fixed",e.style.height=Ie(pe.backgroundImageDistanceToTop))}),he=e,ye=!0):ye&&he>e&&(ye=!1,n.forEach(e=>{e&&(e.style.position="",e.style.height=le)}))}})}function Ie(e){return e+"px"}function Se(){ae&&(!me&&ue?(ae.style.top=Ie(2*pe.searchDistanceToTop-re),ae.classList.add("sticky-search"),me=!0):(ae.style.top="0px",ae.classList.remove("sticky-search"),me=!1))}class ke extends r.a{constructor(e,t,n,o,i,a){super(e,t,n,o,i,a),this.displayEnterpriseSettings=!0,this.isGreetingModuleEnabled=!1,this.customDropDownContentChangeToFireTelemetry=(e,t)=>{},this.customLayoutChangeToFireTelemetry=(e,t)=>{},this.onSelectLayout=(e,t)=>{if(e===t)return;let n;if(e!==l.h.custom){const t=l.j[e];n={currentBackgroundImageType:t.current_background_image_type,currentLayout:e,greetingEnabled:t.greeting,imageOfTheDayEnabled:t.current_background_image_type!==l.a.off,quickLinksEnabled:t.quick_links,selectedFeedDisplaySetting:t.feeds_position}}this.chromiumPageSettingsDataConnector.updateLayout(n)},this.getTelemetryItem=(e,t)=>null,this.toggleCustomSection=e=>{},this.onContentSourceChange=e=>{this.getCurrentState().contentSource!==e&&(this.chromiumNTPAPI.setPref(l.i.showSettings,!0),this.chromiumNTPAPI.setPref(l.i.feedType,e))},ee.initialize(),ne=document.getElementById(h.a.backgroundImage),oe=document.getElementById(h.a.backgroundImage2),ie=document.getElementById(h.a.backgroundImageOverlay),le=ne?ne.style.height:"",ae=document.getElementById(h.a.search),se=document.getElementById(h.a.antpScroll),re=ae.getBoundingClientRect().top,Se(),se.addEventListener("scroll",be,{passive:!0}),de=Object(te.a)(fe,300,{leading:!1,trailing:!0}),window.addEventListener("resize",de),x.initialize(),this.chromiumNTPAPI=window&&window.chrome&&window.chrome.ntpSettingsPrivate,this.chromiumPageSettingsDataConnector=n.connector(c.a.ChromiumPageSettings),this.bingImageDataConnector=n.connector(c.a.BingImageData),x.updateObservers(!0,2===window.initialPageLayout),g.a.updateLayout.registerObserver(e=>{const t=e&&e.params;if(!t||t.length<1)return;let n=t[0].currentLayout,o=l.d.headingsOnly;n===l.h.custom&&(n=l.h.informational,o=l.d.always),n===l.h.informational&&(o=l.d.always),x.updateObservers(!0,n!==l.h.focused),ee.updateLayout(n),function(e,t){he=0,ye=!1,ce=e,re=ce(),ge=t,le=ge()}(ee.reportSearchYPosition,ee.reportBackgroundImageHeight),this.reportLayoutSwitch(n),window.pageLayout=n,this.bingImageDataConnector&&this.bingImageDataConnector.updateLayoutStatus(o);const i=t[0],{currentBackgroundImageType:a,contentSource:s,currentLayout:r,customBackgroundImageInfo:c,quickLinksEnabled:g,imageOfTheDayEnabled:u,selectedFeedDisplaySetting:m,greetingEnabled:h,openSettingsDialogFlyout:y}=i,p={contentSource:s,currentBackgroundImageType:a,currentLayout:r,customBackgroundImageInfo:c,displayCustomSettings:this.getCurrentState().displayCustomSettings,displayDialog:!1,displayEnterpriseSettings:this.displayEnterpriseSettings,greetingEnabled:h,imageOfTheDayEnabled:u,isTrackingEnabled:!1,quickLinksEnabled:g,selectedFeedDisplaySetting:m};y&&this.chromiumNTPAPI.setPref(l.i.showSettings,!1),d.a.layoutChange.getActionSender(this).send(p)})}mapStateToProps(e){const t=u.a.inspect({config:this.config,connectorArgs:{getTelemetryItem:this.getTelemetryItem,onContentSourceChange:this.onContentSourceChange,onCustomToggleChange:null,onDeleteLocalBackgroundImage:null,onSelectLayout:this.onSelectLayout,onUploadLocalBackgroundImage:null,toggleCustomSection:this.toggleCustomSection},children:this.childComponentInstanceList,state:e});return Object.assign(Object.assign({},t.props),this.telemetryTags)}onComponentConnect(e){return Object(o.a)(this,void 0,void 0,(function*(){yield r.a.prototype.onComponentConnect.call(this,e);const t=yield this.chromiumPageSettingsDataConnector.getPageSettingsStateAsync(),{contentGroupPolicySettings:n,contentSource:o,currentBackgroundImageType:i,currentLayout:a,customBackgroundImageInfo:s,greetingEnabled:c,imageOfTheDayEnabled:g,openSettingsDialogFlyout:u,quickLinksEnabled:m,selectedFeedDisplaySetting:h}=t,y={contentGroupPolicySettings:n,contentSource:o,currentBackgroundImageType:i,currentLayout:a,customBackgroundImageInfo:s,displayCustomSettings:!1,displayDialog:u,displayEnterpriseSettings:this.displayEnterpriseSettings,greetingEnabled:c,imageOfTheDayEnabled:g,displayCustomBackgroundImageModule:!1,displayGreetingModule:!!this.isGreetingModuleEnabled&&this.isGreetingModuleEnabled,isTrackingEnabled:!1,quickLinksEnabled:m,selectedFeedDisplaySetting:h};u&&this.chromiumNTPAPI.setPref(l.i.showSettings,!1),d.a.initialize.getActionSender(this).send(y)}))}reportAppError(e,t){const n=window.getCommonParamsAntp();n.Error=e,n.DebugInfo=t,m.a.logEvent("Generic_Event","SettingsDialogEdgeNext_Error",0,n,[])}reportLayoutSwitch(e){if(m.a.isMetricsReportingEnabled()){const t=window.getCommonParamsAntp();t.Action="Click",t.Area="Layout",t.ElementId=e,m.a.logEvent("Generic_Click","SettingsDialogEdgeNext",0,t,[])}}}function Te(e){return Object(o.a)(this,void 0,void 0,(function*(){const t=function(e){return{ariaLabel_backButton:e.ariaLabel_backButton,ariaLabel_closeButton:e.ariaLabel_closeButton,ariaLabel_dialogButton:e.ariaLabel_dialogButton,enableCustomLayout:!1,enableCustomBackgroundImageFeature:!1,heading_customSettings:{children:""},aboutAdsLink:{href:"",children:""},enableCustomL2:!1,heading_layoutSettings:{children:e.heading_layoutSettings},feedSettingsOptions:[{displayString:"contentVisible",id:"always",value:"always"},{displayString:"headingsonly",id:"headingsonly",value:"headingsonly"},{displayString:"onscroll",id:"onscroll",value:"onscroll"},{displayString:"off",id:"off",value:"off"}],legalLink:{href:"",children:""},marketSelector:{experienceType:"",instanceId:"",href:""},privacyLink:{href:"",children:""},label_bingImageOption:{children:""},label_chooseYourOwnImageOption:{children:""},label_customMode:{children:e.label_customMode},label_focusedMode:{children:e.label_focusedMode},label_informationalMode:{children:e.label_informationalMode},label_inspirationalMode:{children:e.label_inspirationalMode},text_background:"",text_feeds:e.text_feeds,text_greeting:"",text_imageOfTheDay:e.text_imageOfTheDay,text_quickLinks:e.text_quickLinks,text_removeBackgroundImageButton:"",text_uploadBackgroundImageButton:"",textToggle_feedOff:e.textToggle_feedOff,textToggle_feedOn:e.textToggle_feedOn,textToggle_off:e.textToggle_off,textToggle_on:e.textToggle_on,altText_adminHoverMessage:e.altText_adminHoverMessage,heading_enterpriseSettings:{children:e.heading_enterpriseSettings},label_msnews:{children:e.label_msnews},label_office:{children:e.label_office},textSelectToolTip:"",localizedStrings:{aboutAds:"About our ads",background:"",bingImageOption:"",chooseYourOwnImageOption:"",contentVisible:"",customMode:"",customSettings:"",enterpriseSettings:"",feeds:e.text_feeds,focusedMode:e.label_focusedMode,greeting:"",headingsOnly:"",imageOfTheDay:"",informationalMode:e.label_informationalMode,inspirationalMode:e.label_inspirationalMode,legal:"",mainSettings:"",msnews:"",off:"",offOption:"",office:e.label_office,onScroll:"",toggleOff:"",toggleOn:"",privacy:"",quickLinks:"",removeBackgroundImageButton:"",uploadBackgroundImageButton:"",accessibility:{adminHoverMessage:e.altText_adminHoverMessage,backButton:e.ariaLabel_backButton,closeButton:e.ariaLabel_closeButton,customSettings:"",dialogButton:"",feedsToolTip:"",uploadANewImageButton:""}}}}(e.settings),n=i.a.getInstance(),o=new a.a,r=new ke("SettingsDialogEdgeNext","",n.rootReducer,o,n.store,t);return yield r.connectComponent(s.a)}))}}}]);
//# sourceMappingURL=antp-shared-settings-experience-loader.a54436cf9ccccbc985b8.chunk.v4.js.map